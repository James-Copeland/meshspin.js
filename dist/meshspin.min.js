!function(){var t={f:{},m:{},r:function(e){var s=t.m[e];if(s)return s.m.exports;var i=t.f[e];return i?((s=t.m[e]={}).exports={},s.m={exports:s.exports},i.call(s.exports,s.m,s.exports),s.m.exports):void 0}};t.f[0]=function(e,s){Object.defineProperty(s,"__esModule",{value:!0});const i=t.r(1);window.MeshSpin=i.MeshSpin},t.f[1]=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.MeshSpin=class{constructor(t={}){this.props=Object.assign({background:!1,debug:!1,edgeSeperator:",",fake3D:!1,fillColor:null,fps:60,scaleFactor:50,viewBox:[-100,-100,200,200]},t),this.fig={nodes:[{x:Math.sqrt(8/9),y:0,z:-1/3},{x:-Math.sqrt(2/9),y:Math.sqrt(2/3),z:-1/3},{x:-Math.sqrt(2/9),y:-Math.sqrt(2/3),z:-1/3},{x:0,y:0,z:1}].map(t=>({x:t.x*this.props.scaleFactor,y:t.y*this.props.scaleFactor,z:t.z*this.props.scaleFactor})),edges:[[3,2],[0,2],[1,2],[3,0],[3,1],[1,0]]},this.staticRotation={x:.01,y:.01,z:.01},this.figure=function(t){this.fig=JSON.parse(JSON.stringify(t)),this.scale()},this.scale=function(){this.fig.nodes=this.fig.nodes.map(t=>({x:t.x*this.props.scaleFactor,y:t.y*this.props.scaleFactor,z:t.z*this.props.scaleFactor}))},this.rotate=function(t){this.fig.nodes=this.fig.nodes.map(e=>({x:e.x*Math.cos(t.x)-e.z*Math.sin(t.x),y:e.y,z:e.z*Math.cos(t.x)+e.x*Math.sin(t.x)})).map(e=>({x:e.x,y:e.y*Math.cos(t.y)-e.z*Math.sin(t.y),z:e.z*Math.cos(t.y)+e.y*Math.sin(t.y)})).map(e=>({x:e.x*Math.cos(t.z)-e.y*Math.sin(t.z),y:e.y*Math.cos(t.z)+e.x*Math.sin(t.z),z:e.z}))},this.sortEdges=function(t){for(let e=0;e<t.length;++e)t[e].sort();var e=t.map(t=>t.join(this.props.edgeSeperator)).filter((t,e,s)=>s.indexOf(t)===e);return e.sort(),e},this.setup=function(t){this.fig.edges=this.sortEdges(this.fig.edges),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("viewBox",this.props.viewBox.join(" ")),this.ns=this.svg.namespaceURI,document.getElementById(t).appendChild(this.svg),document.addEventListener("mousemove",this.mouseUpdate(),!1),document.addEventListener("mouseenter",this.mouseUpdate(),!1)},this.nextOutlineNode=function(t,e){function s(t,e){return{x:t.x-e.x,y:t.y-e.y}}prevNode=null===e?{x:this.fig.nodes[t].x-1,y:this.fig.nodes[t].y}:this.fig.nodes[e],prevVector=s(this.fig.nodes[t],prevNode);var i,o,n=this.fig.nodes.map(e=>s(e,this.fig.nodes[t])).map(t=>(i=prevVector,o=t,Math.acos((i.x*o.x+i.y*o.y)/(Math.sqrt(i.x*i.x+i.y*i.y)*Math.sqrt(o.x*o.x+o.y*o.y))))).map((s,i)=>i==t||i==e||isNaN(s)?7:s);return n.indexOf(Math.min.apply(Math,n))},this.outlineEdges=function(){var t=[],e=[],s=this.fig.nodes.map(t=>t.x),i=s.indexOf(Math.max.apply(Math,s)),o=null,n=i;do{next=this.nextOutlineNode(n,o),t.push(n),e.push([n,next]),o=n,n=next}while(n!=i);return e=this.sortEdges(e),this.props.background&&(this.backgroundPoly=t.map(t=>this.fig.nodes[t].x.toString()+","+this.fig.nodes[t].y.toString())),[t,e]},this.fake3Dedges=function(){var t=this.outlineEdges();outlineNodes=t[0];var e=t[1].concat(this.fig.edges.map(t=>t.split(this.props.edgeSeperator).map(t=>parseInt(t))).filter(t=>this.fig.nodes[t[0]].z>=0&&this.fig.nodes[t[1]].z>=0||this.fig.nodes[t[0]].z>=this.fig.nodes[t[1]].z&&outlineNodes.indexOf(t[1])>=0&&-1==outlineNodes.indexOf(t[0])||this.fig.nodes[t[1]].z>=this.fig.nodes[t[0]].z&&outlineNodes.indexOf(t[0])>=0&&-1==outlineNodes.indexOf(t[1])).map(t=>t.join(this.props.edgeSeperator))).filter((t,e,s)=>s.indexOf(t)===e);return e.sort(),e},this.draw=function(){for(;this.svg.lastChild;)this.svg.removeChild(this.svg.lastChild);var t=this.getRotationOffset();this.rotate(t);var e=this.props.fake3D?this.fake3Dedges():this.fig.edges;if(this.props.background){var s=document.createElementNS(this.ns,"polygon");s.setAttribute("points",this.backgroundPoly.join(" ")),s.setAttribute("class","meshspin-background"),this.props.fillColor&&s.setAttribute("fill",this.props.fillColor),this.svg.appendChild(s)}for(let t=0;t<e.length;t++){var i=e[t].split(this.props.edgeSeperator),o=document.createElementNS(this.ns,"line");o.setAttribute("x1",this.fig.nodes[i[0]].x),o.setAttribute("y1",this.fig.nodes[i[0]].y),o.setAttribute("x2",this.fig.nodes[i[1]].x),o.setAttribute("y2",this.fig.nodes[i[1]].y),o.setAttribute("stroke",this.color()),o.setAttribute("class","meshspin-line"),this.svg.appendChild(o)}this.props.debug&&this.drawDebugNodes()},this.drawDebugNodes=function(){for(let s=0;s<this.fig.nodes.length;s++){var t=document.createElementNS(this.ns,"text");t.setAttribute("x",this.fig.nodes[s].x),t.setAttribute("y",this.fig.nodes[s].y),t.appendChild(document.createTextNode(s)),this.svg.appendChild(t);var e=document.createElementNS(this.ns,"circle");e.setAttribute("cx",this.fig.nodes[s].x),e.setAttribute("cy",this.fig.nodes[s].y),e.setAttribute("r","3px"),e.setAttribute("stroke","transparent"),e.setAttribute("fill",this.fig.nodes[s].z<0?"#666":"black"),this.svg.appendChild(e)}},this.animationFrameCallback=function(){var t=this;return function e(s){requestAnimationFrame(e),t.lastFrame||(t.lastFrame=s),s-t.lastFrame<1e3/t.fps||(t.currentFrame||(t.currentFrame=0),++t.currentFrame,t.lastFrame=s,t.draw())}},this.run=function(){requestAnimationFrame(this.animationFrameCallback())},this.getRotationOffset=function(){return this.staticRotation},this.rotateByMouse=function(){return{x:.01*(this.Mouse.prev.x-this.Mouse.x),y:.01*(this.Mouse.prev.y-this.Mouse.y),z:0}},this.colorStatic=function(t){return function(){return t}},this.color=this.colorStatic("currentColor"),this.Mouse={x:0,y:0,prev:{x:0,y:0}},this.mouseInterval=null,this.mouseUpdate=function(){var t=this;return function(e){t.Mouse={x:e.pageX,y:e.pageY,prev:{x:t.Mouse.x,y:t.Mouse.y}},t.mouseInterval&&(clearInterval(t.mouseInterval),t.mouseInterval=null),t.mouseInterval=setInterval(function(){t.Mouse.prev={x:t.Mouse.x,y:t.Mouse.y}},100)}}}}},t.r(0)}();